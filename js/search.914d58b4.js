(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["search"],{"05c1":function(e,t,n){},"0e70":function(e,t,n){"use strict";n("aa31")},1276:function(e,t,n){"use strict";var r=n("d784"),a=n("44e7"),l=n("825a"),i=n("1d80"),c=n("4840"),u=n("8aa5"),o=n("50c4"),d=n("14c3"),s=n("9263"),f=n("d039"),b=[].push,m=Math.min,p=4294967295,h=!f((function(){return!RegExp(p,"y")}));r("split",2,(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=String(i(this)),l=void 0===n?p:n>>>0;if(0===l)return[];if(void 0===e)return[r];if(!a(e))return t.call(r,e,l);var c,u,o,d=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,h=new RegExp(e.source,f+"g");while(c=s.call(h,r)){if(u=h.lastIndex,u>m&&(d.push(r.slice(m,c.index)),c.length>1&&c.index<r.length&&b.apply(d,c.slice(1)),o=c[0].length,m=u,d.length>=l))break;h.lastIndex===c.index&&h.lastIndex++}return m===r.length?!o&&h.test("")||d.push(""):d.push(r.slice(m)),d.length>l?d.slice(0,l):d}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var a=i(this),l=void 0==t?void 0:t[e];return void 0!==l?l.call(t,a,n):r.call(String(a),t,n)},function(e,a){var i=n(r,e,this,a,r!==t);if(i.done)return i.value;var s=l(e),f=String(this),b=c(s,RegExp),v=s.unicode,j=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(h?"y":"g"),O=new b(h?s:"^(?:"+s.source+")",j),g=void 0===a?p:a>>>0;if(0===g)return[];if(0===f.length)return null===d(O,f)?[f]:[];var y=0,x=0,w=[];while(x<f.length){O.lastIndex=h?x:0;var S,I=d(O,h?f:f.slice(x));if(null===I||(S=m(o(O.lastIndex+(h?0:x)),f.length))===y)x=u(f,x,v);else{if(w.push(f.slice(y,x)),w.length===g)return w;for(var q=1;q<=I.length-1;q++)if(w.push(I[q]),w.length===g)return w;x=y=S}}return w.push(f.slice(y)),w}]}),!h)},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"13d5":function(e,t,n){"use strict";var r=n("23e7"),a=n("d58f").left,l=n("a640"),i=n("ae40"),c=n("2d00"),u=n("605d"),o=l("reduce"),d=i("reduce",{1:0}),s=!u&&c>79&&c<83;r({target:"Array",proto:!0,forced:!o||!d||s},{reduce:function(e){return a(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"2d3b":function(e,t,n){"use strict";n.r(t);n("99af"),n("d3b7"),n("ac1f"),n("841c"),n("ddb0");var r=n("7a23"),a=Object(r["T"])("data-v-c318aa10");Object(r["z"])("data-v-c318aa10");var l={class:"search"},i=Object(r["m"])("h1",null,"Search",-1),c={class:"intro"},u=Object(r["l"])(" Search could be performed using either CMIS or the API, but to use facets "),o=Object(r["m"])("a",{href:"https://developers.preservica.com/api-reference/8-content-api"},"the Content API",-1),d=Object(r["l"])(" is used. The available fields and filters are retrieved from "),s=Object(r["l"])("the indexed fields"),f=Object(r["l"])(". "),b=Object(r["m"])("p",{class:"intro p-mb-6"}," Select the metadata to include in the results. The very same items will also be configured as filters, but you can manually overrule that in the Request tab. ",-1),m={class:"p-d-flex p-jc-end"},p={class:"p-input-icon-left"},h=Object(r["m"])("i",{class:"pi pi-search"},null,-1),v=Object(r["m"])("p",{class:"intro p-mb-6"},[Object(r["l"])(" This is the request that will be sent to the API. You can edit this manually, but it will also be updated when making changes in the other tabs and input fields. Making changes on the Metadata tab will override both "),Object(r["m"])("code",null,"metadata"),Object(r["l"])(" and "),Object(r["m"])("code",null,"query.fields"),Object(r["l"])(". ")],-1),j={class:"p-fluid p-formgrid p-grid p-text-left"},O={class:"p-field p-col-12"},g=Object(r["m"])("label",{for:"metadata"},"Metadata to return",-1),y={class:"p-field p-col-12"},x=Object(r["m"])("label",{for:"query"},"Query",-1),w={key:0,class:"p-mx-lg-6 p-mx-md-2 p-mx-sm-0"},S=Object(r["m"])("br",null,null,-1),I={class:"p-fluid p-formgrid p-grid p-text-left"},q={class:"p-input-icon-right p-mb-2"},k={class:"p-fluid p-formgrid p-grid p-text-left"},R={class:"p-field p-col-12 p-lg-8 p-md-6"},C=Object(r["m"])("label",{for:"q"},"Search text",-1),E={class:"p-field p-col-6 p-lg-1 p-md-2"},V=Object(r["m"])("label",{for:"start"},"Start",-1),T={class:"p-field p-col-6 p-lg-1 p-md-2"},_=Object(r["m"])("label",{for:"max"},"Limit",-1),B={class:"p-field p-col-12 p-lg-2 p-md-2 p-as-end"},N={key:1},A={class:"json"};Object(r["x"])();var M=a((function(e,t,n,M,U,F){var J,K=Object(r["E"])("router-link"),P=Object(r["E"])("TabPanel"),L=Object(r["E"])("InputText"),z=Object(r["E"])("Column"),D=Object(r["E"])("DataTable"),W=Object(r["E"])("Textarea"),H=Object(r["E"])("TabView"),Q=Object(r["E"])("AuthWarning"),Y=Object(r["E"])("Button"),$=Object(r["E"])("InputNumber"),G=Object(r["E"])("DocumentRenderer"),X=Object(r["E"])("AccordionTab"),Z=Object(r["E"])("Accordion");return Object(r["w"])(),Object(r["h"])(r["a"],null,[Object(r["m"])("div",l,[i,e.configured?(Object(r["w"])(),Object(r["h"])(H,{key:0,onTabChange:e.onTabChange},{default:a((function(){return[Object(r["m"])(P,{header:"Introduction"},{default:a((function(){return[Object(r["m"])("p",c,[u,o,d,Object(r["m"])(K,{to:"/indexes"},{default:a((function(){return[s]})),_:1}),f])]})),_:1}),Object(r["m"])(P,{header:"Metadata"},{default:a((function(){return[b,e.fields?(Object(r["w"])(),Object(r["h"])(D,{key:0,value:e.fields,selection:e.selectedFields,"onUpdate:selection":t[2]||(t[2]=function(t){return e.selectedFields=t}),autoLayout:!0,responsiveLayout:"scroll",sortMode:"multiple",multiSortMeta:e.multiSortMeta,filters:e.filters,class:"p-datatable-sm"},{header:a((function(){return[Object(r["m"])("div",m,[Object(r["m"])("span",p,[h,Object(r["m"])(L,{modelValue:e.filters["global"].value,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.filters["global"].value=t}),placeholder:"all-column search",size:"50"},null,8,["modelValue"])])])]})),default:a((function(){return[Object(r["m"])(z,{selectionMode:"multiple",headerStyle:"width: 3rem"}),Object(r["m"])(z,{field:"shortName",header:"source",sortable:!0,headerClass:"p-text-center",bodyClass:"p-text-center"}),Object(r["m"])(z,{field:"displayName",header:"name",sortable:!0}),Object(r["m"])(z,{field:"shortKey",header:"key",sortable:!0}),Object(r["m"])(z,{field:"type",header:"type",sortable:!0}),Object(r["m"])(z,{field:"facetable",header:"facet",sortable:!0})]})),_:1},8,["value","selection","multiSortMeta","filters"])):Object(r["i"])("",!0)]})),_:1}),Object(r["m"])(P,{header:"Request"},{default:a((function(){return[v,Object(r["m"])("div",null,[Object(r["m"])("div",j,[Object(r["m"])("div",O,[g,Object(r["m"])(L,{id:"metadata",type:"text",modelValue:e.metadata,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.metadata=t})},null,8,["modelValue"])]),Object(r["m"])("div",y,[x,Object(r["m"])(W,{id:"query",modelValue:e.queryJson,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.queryJson=t}),rows:"20",autoResize:!1,spellcheck:"false"},null,8,["modelValue"])])])])]})),_:1})]})),_:1},8,["onTabChange"])):Object(r["i"])("",!0),Object(r["m"])(Q)]),e.configured?(Object(r["w"])(),Object(r["h"])("div",w,[S,Object(r["m"])("div",I,[(Object(r["w"])(!0),Object(r["h"])(r["a"],null,Object(r["C"])(e.filtersAndValues,(function(t,n){return Object(r["w"])(),Object(r["h"])("div",{key:"field-".concat(n),class:"p-field p-col-12 p-lg-4 p-md-6"},[Object(r["m"])("label",{for:"f-".concat(n,"-0")},"Filter for "+Object(r["I"])(e.filterName(t)),9,["for"]),Object(r["m"])(Y,{icon:"pi pi-plus",class:"p-button-rounded p-button-primary p-button-text",onClick:function(n){return e.addFilter(t)}},null,8,["onClick"]),(Object(r["w"])(!0),Object(r["h"])(r["a"],null,Object(r["C"])(t.values,(function(a,l){return Object(r["w"])(),Object(r["h"])("div",{key:"filter-".concat(n,"-").concat(l)},[Object(r["m"])("span",q,[Object(r["m"])(L,{id:"f-".concat(n,"-").concat(l),modelValue:t.values[l],"onUpdate:modelValue":function(e){return t.values[l]=e}},null,8,["id","modelValue","onUpdate:modelValue"]),Object(r["m"])("i",{class:"pi pi-times remove-filter",onClick:function(n){return e.removeFilter(t,l)}},null,8,["onClick"])])])})),128))])})),128))]),Object(r["m"])("div",k,[Object(r["m"])("div",R,[C,Object(r["m"])(L,{id:"q",modelValue:e.q,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.q=t})},null,8,["modelValue"])]),Object(r["m"])("div",E,[V,Object(r["m"])($,{id:"start",modelValue:e.start,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.start=t}),min:0,showButtons:""},null,8,["modelValue"])]),Object(r["m"])("div",T,[_,Object(r["m"])($,{id:"max",modelValue:e.max,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.max=t}),min:0,showButtons:""},null,8,["modelValue"])]),Object(r["m"])("div",B,[Object(r["m"])(Y,{icon:"pi pi-search",onClick:e.search,label:"Search"},null,8,["onClick"])])])])):Object(r["i"])("",!0),e.result?(Object(r["w"])(),Object(r["h"])("div",N,[Object(r["m"])("h2",null,"Showing "+Object(r["I"])(null===(J=e.result.value.objectIds)||void 0===J?void 0:J.length)+" of "+Object(r["I"])(e.result.value.totalHits)+" results",1),Object(r["m"])(Z,{activeIndex:0},{default:a((function(){return[Object(r["m"])(X,{header:"Table"},{default:a((function(){return[Object(r["m"])(D,{value:e.tableResults,autoLayout:!0,responsiveLayout:"scroll",expandedRows:e.tableExpandedRows,"onUpdate:expandedRows":t[8]||(t[8]=function(t){return e.tableExpandedRows=t})},{expansion:a((function(e){return[Object(r["m"])(G,{"object-id":e.data.objectId},null,8,["object-id"])]})),default:a((function(){return[Object(r["m"])(z,{expander:!0,headerStyle:"width: 1rem",bodyStyle:"padding: 0"}),(Object(r["w"])(!0),Object(r["h"])(r["a"],null,Object(r["C"])(e.tableColumns,(function(e){return Object(r["w"])(),Object(r["h"])(z,{field:e.field,header:e.header,key:e.field},{body:a((function(t){return[Object(r["l"])(Object(r["I"])(t.data[e.field]),1)]})),_:2},1032,["field","header"])})),128))]})),_:1},8,["value","expandedRows"])]})),_:1}),Object(r["m"])(X,{header:"JSON"},{default:a((function(){return[Object(r["m"])("div",A,Object(r["I"])(e.result),1)]})),_:1})]})),_:1})])):Object(r["i"])("",!0)],64)}));n("7db0"),n("a15b"),n("d81d"),n("13d5"),n("a434"),n("b0c0"),n("1276"),n("a4d3"),n("e01a"),n("d28b"),n("3ca3");function U(e){return U="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}var F=n("b85c"),J=(n("96cf"),n("1da1")),K=n("0393"),P=n("18cb"),L=n("34f5"),z=Object(r["T"])("data-v-26bfd6b2");Object(r["z"])("data-v-26bfd6b2");var D={key:0};Object(r["x"])();var W=z((function(e,t,n,a,l,i){return e.renderUrl?(Object(r["w"])(),Object(r["h"])("div",D,[Object(r["m"])("iframe",{src:e.renderUrl},null,8,["src"]),Object(r["m"])("a",{href:e.renderUrl,target:'"_blank'},"open in new window",8,["href"])])):Object(r["i"])("",!0)})),H=(n("fb6a"),n("466d"),n("3835")),Q=n("d0f2"),Y=Object(r["n"])({props:{objectId:{type:String,required:!0}},setup:function(e){var t,n=Object(Q["b"])(),a=n.fullUrlWithToken,l=Object(r["B"])(),i=(null===(t=e.objectId.match(/^sdb:(.*)\|(.*)$/))||void 0===t?void 0:t.slice(1))||[],c=Object(H["a"])(i,2),u=c[0],o=c[1];return a("Render/render/external?entity=".concat(u,"&entityRef=").concat(o,"&token={token}"),!1).then((function(e){return l.value=e})),{renderUrl:l}}});n("0e70");Y.render=W,Y.__scopeId="data-v-26bfd6b2";var $=Y,G=Object(r["n"])({components:{AuthWarning:L["a"],DocumentRenderer:$},setup:function(){var e=Object(Q["b"])(),t=e.configured,n=e.fetchWithToken,a=Object(P["b"])(),l=Object(r["B"])(void 0),i=Object(r["B"])([]),c=Object(r["B"])([]),u=Object(r["B"])([]),o=Object(r["B"])({global:{value:null,matchMode:K["a"].CONTAINS}}),d=Object(r["B"])([{field:"shortName",order:-1},{field:"displayName",order:1}]),s=Object(r["B"])(void 0),f=Object(r["B"])([]),b=Object(r["B"])([]),m=Object(r["B"])(0),p=Object(r["B"])(10),h=Object(r["B"])({q:"",fields:[{name:"xip.title",values:[""]},{name:"xip.description",values:[""]},{name:"xip.document_type",values:["IO"]}],sort:[{sortFields:["xip.created"],sortOrder:"desc"}],facets:["xip.created","xip.format_group_r_Display"],"facet.xip.created.range":[["*","","Pre 2015"],["2015-01-01","","2015"],["2016-01-01","","2016"],["2017-01-01","","2017"],["2018-01-01","","2018"],["2019-01-01","","2019"],["2020-01-01","","2020"],["2021-01-01","*","2021 and later"]]}),v=Object(r["B"])(h.value.fields.map((function(e){return e.name})).join()),j=function(){var e=Object(J["a"])(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s.value=void 0,r="q=".concat(JSON.stringify(h.value),"&start=").concat(m.value,"&max=").concat(p.value,"&metadata=").concat(v.value),e.next=4,n("api/content/search",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r});case 4:return a=e.sent,e.next=7,a.json();case 7:s.value=e.sent,f.value=null===(t=v.value)||void 0===t?void 0:t.split(",").map((function(e){var t,n;return{field:e,header:(null===(t=l.value)||void 0===t||null===(n=t.find((function(t){return t.shortKey===e})))||void 0===n?void 0:n.displayName)||e}}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t.value&&n("api/content/indexed-fields").then(function(){var e=Object(J["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:l.value=e.sent.value;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),{configured:t,toast:a,fields:l,selectedFields:i,filters:o,multiSortMeta:d,shortNames:c,types:u,query:h,start:m,max:p,metadata:v,search:j,result:s,tableColumns:f,tableExpandedRows:b}},watch:{selectedFields:function(e){var t=this;this.query.fields=e.map((function(e){var n;return{name:e.shortKey,values:(null===(n=t.query.fields.find((function(t){return t.name===e.shortKey})))||void 0===n?void 0:n.values)||[]}})),this.metadata=this.query.fields.map((function(e){return e.name})).join()},query:function(e){this.q=e.q}},methods:{onTabChange:function(){var e=this;if(this.fields&&this.query){var t,n=[],r=Object(F["a"])(this.query.fields);try{var a=function(){var r=t.value,a=e.fields.find((function(e){return r.name===e.shortKey}));if(!a)return e.toast.add({severity:"error",summary:"Invalid field",detail:"The field ".concat(r.name," in the JSON is invalid and will be removed when making other changes"),life:5e3}),{v:void 0};n.push(a)};for(r.s();!(t=r.n()).done;){var l=a();if("object"===U(l))return l.v}}catch(i){r.e(i)}finally{r.f()}this.selectedFields=n}},filterName:function(e){var t,n;return(null===(t=this.fields)||void 0===t||null===(n=t.find((function(t){return t.shortKey===e.name})))||void 0===n?void 0:n.displayName)||e.name},addFilter:function(e){var t;null===(t=e.values)||void 0===t||t.push("")},removeFilter:function(e,t){var n;null===(n=e.values)||void 0===n||n.splice(t,1)}},computed:{queryJson:{get:function(){return JSON.stringify(this.query,null,2)},set:function(e){this.query=JSON.parse(e)}},q:{get:function(){return this.query.q},set:function(e){this.query.q=e}},filtersAndValues:{get:function(){return this.query.fields},set:function(e){this.query.fields=e}},tableResults:function(){var e,t=this,n=null===(e=this.result)||void 0===e?void 0:e.value.metadata.map((function(e){return e.reduce((function(e,t){return e[t.name]=t.value,e}),{})}));return n.map((function(e,n){var r;return e["objectId"]=null===(r=t.result)||void 0===r?void 0:r.value.objectIds[n],e}))}}});n("7390");G.render=M,G.__scopeId="data-v-c318aa10";t["default"]=G},"44e7":function(e,t,n){var r=n("861d"),a=n("c6b6"),l=n("b622"),i=l("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==a(e))}},"466d":function(e,t,n){"use strict";var r=n("d784"),a=n("825a"),l=n("50c4"),i=n("1d80"),c=n("8aa5"),u=n("14c3");r("match",1,(function(e,t,n){return[function(t){var n=i(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var i=a(e),o=String(this);if(!i.global)return u(i,o);var d=i.unicode;i.lastIndex=0;var s,f=[],b=0;while(null!==(s=u(i,o))){var m=String(s[0]);f[b]=m,""===m&&(i.lastIndex=c(o,l(i.lastIndex),d)),b++}return 0===b?null:f}]}))},7390:function(e,t,n){"use strict";n("05c1")},"7db0":function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").find,l=n("44d2"),i=n("ae40"),c="find",u=!0,o=i(c);c in[]&&Array(1)[c]((function(){u=!1})),r({target:"Array",proto:!0,forced:u||!o},{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),l(c)},"841c":function(e,t,n){"use strict";var r=n("d784"),a=n("825a"),l=n("1d80"),i=n("129f"),c=n("14c3");r("search",1,(function(e,t,n){return[function(t){var n=l(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var l=a(e),u=String(this),o=l.lastIndex;i(o,0)||(l.lastIndex=0);var d=c(l,u);return i(l.lastIndex,o)||(l.lastIndex=o),null===d?-1:d.index}]}))},a434:function(e,t,n){"use strict";var r=n("23e7"),a=n("23cb"),l=n("a691"),i=n("50c4"),c=n("7b0b"),u=n("65f0"),o=n("8418"),d=n("1dde"),s=n("ae40"),f=d("splice"),b=s("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,p=Math.min,h=9007199254740991,v="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!f||!b},{splice:function(e,t){var n,r,d,s,f,b,j=c(this),O=i(j.length),g=a(e,O),y=arguments.length;if(0===y?n=r=0:1===y?(n=0,r=O-g):(n=y-2,r=p(m(l(t),0),O-g)),O+n-r>h)throw TypeError(v);for(d=u(j,r),s=0;s<r;s++)f=g+s,f in j&&o(d,s,j[f]);if(d.length=r,n<r){for(s=g;s<O-r;s++)f=s+r,b=s+n,f in j?j[b]=j[f]:delete j[b];for(s=O;s>O-r+n;s--)delete j[s-1]}else if(n>r)for(s=O-r;s>g;s--)f=s+r-1,b=s+n-1,f in j?j[b]=j[f]:delete j[b];for(s=0;s<n;s++)j[s+g]=arguments[s+2];return j.length=O-r+n,d}})},aa31:function(e,t,n){},d58f:function(e,t,n){var r=n("1c0b"),a=n("7b0b"),l=n("44ad"),i=n("50c4"),c=function(e){return function(t,n,c,u){r(n);var o=a(t),d=l(o),s=i(o.length),f=e?s-1:0,b=e?-1:1;if(c<2)while(1){if(f in d){u=d[f],f+=b;break}if(f+=b,e?f<0:s<=f)throw TypeError("Reduce of empty array with no initial value")}for(;e?f>=0:s>f;f+=b)f in d&&(u=n(u,d[f],f,o));return u}};e.exports={left:c(!1),right:c(!0)}},d81d:function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").map,l=n("1dde"),i=n("ae40"),c=l("map"),u=i("map");r({target:"Array",proto:!0,forced:!c||!u},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=search.914d58b4.js.map