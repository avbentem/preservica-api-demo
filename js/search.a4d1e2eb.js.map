{"version":3,"sources":["webpack:///./src/views/Search.vue","webpack:///./src/views/Search.vue?7010","webpack:///./src/views/Search.vue?0900","webpack:///./src/views/Search.vue?d3f7"],"names":["class","href","for","configured","id","query","rows","autoResize","spellcheck","type","start","max","metadata","icon","search","label","json","header","components","AuthWarning","setup","fetchWithToken","undefined","value","body","method","headers","res","render","__scopeId"],"mappings":"sPACOA,MAAM,gB,EACT,yBAAe,UAAX,UAAM,G,EACV,yBAII,U,6BAJD,+EAED,yBAA2F,KAAxFC,KAAK,iEAAgE,mB,6BAAmB,gB,gBAOxFD,MAAM,yC,GACJA,MAAM,oB,EACT,yBAAgC,SAAzBE,IAAI,SAAQ,SAAK,G,GAIrBF,MAAM,iC,EACT,yBAAgC,SAAzBE,IAAI,SAAQ,SAAK,G,GAGrBF,MAAM,iC,EACT,yBAAoC,SAA7BE,IAAI,OAAM,eAAW,G,GAGzBF,MAAM,mC,EACT,yBAAsC,SAA/BE,IAAI,YAAW,YAAQ,G,EAIlC,yBAAM,mB,aAOGF,MAAM,Q,yZArCjB,yBAQM,MARN,EAQM,CAPJ,EACA,EAKA,yBAAe,KAGN,EAAAG,Y,yBAAX,yBAsBM,SArBJ,yBAkBM,MAlBN,EAkBM,CAjBJ,yBAIM,MAJN,EAIM,CAHJ,EAEA,yBAAuF,GAA7EC,GAAG,Q,WAAiB,EAAAC,M,qDAAA,EAAAA,MAAK,IAAEC,KAAK,KAAMC,YAAY,EAAMC,WAAW,S,yBAE/E,yBAGM,MAHN,EAGM,CAFJ,EACA,yBAAsD,GAA3CJ,GAAG,QAAQK,KAAK,S,WAAkB,EAAAC,M,qDAAA,EAAAA,MAAK,K,yBAEpD,yBAGM,MAHN,EAGM,CAFJ,EACA,yBAAkD,GAAvCN,GAAG,MAAMK,KAAK,S,WAAkB,EAAAE,I,qDAAA,EAAAA,IAAG,K,yBAEhD,yBAGM,MAHN,EAGM,CAFJ,EACA,yBAA0D,GAA/CP,GAAG,WAAWK,KAAK,O,WAAgB,EAAAG,S,qDAAA,EAAAA,SAAQ,K,2BAG1D,EACA,yBAA2D,GAAnDC,KAAK,aAAc,QAAO,EAAAC,OAAQC,MAAM,U,8DAGvC,EAAAC,M,yBAAX,yBAMM,SALJ,yBAIY,Q,WAHV,iBAEe,CAFf,yBAEe,GAFDC,OAAO,QAAM,C,WACzB,iBAAkC,CAAlC,yBAAkC,MAAlC,EAAkC,6BAAb,EAAAD,MAAI,O,4HCjClB,+BAAgB,CAC7BE,WAAY,CAAEC,cAAA,MACdC,MAF6B,WAExB,MACoC,iBAA/BjB,EADL,EACKA,WAAYkB,EADjB,EACiBA,eAEdL,EAAO,sBAA0CM,GAEjDZ,EAAQ,iBAAI,GACZC,EAAM,iBAAI,IACVC,EAAW,iBAAI,IAEfP,EAAQ,iBAAI,qXAgBZS,EAAM,yDAAG,6GAEbE,EAAKO,WAAQD,EAGPE,EALO,YAKKnB,EAAMkB,MALX,kBAK0Bb,EAAMa,MALhC,gBAK6CZ,EAAIY,MALjD,qBAKmEX,EAASW,OAL5E,SAOKF,EAAe,qBAAsB,CACrDI,OAAQ,OACRC,QAAS,CACP,eAAgB,qCAElBF,SAZW,cAOPG,EAPO,gBAcMA,EAAIX,OAdV,OAcbA,EAAKO,MAdQ,kDAAH,qDAiBZ,MAAO,CAAEpB,aAAYE,QAAOK,QAAOC,MAAKC,WAAUE,SAAQE,W,UC5C9D,EAAOY,OAASA,EAChB,EAAOC,UAAY,kBAEJ,gB,2DCRf","file":"js/search.a4d1e2eb.js","sourcesContent":["<template>\n  <div class=\"search intro\">\n    <h1>Search</h1>\n    <p>\n      Search could be performed using either CMIS or the API, but to use facets\n      <a href=\"https://developers.preservica.com/api-reference/8-content-api\">the Content API</a> is\n      used.\n    </p>\n    <AuthWarning />\n  </div>\n\n  <div v-if=\"configured\">\n    <div class=\"p-fluid p-formgrid p-grid p-text-left\">\n      <div class=\"p-field p-col-12\">\n        <label for=\"query\">Query</label>\n        <!-- TODO editor with JSON syntax check -->\n        <Textarea id=\"query\" v-model=\"query\" rows=\"10\" :autoResize=\"true\" spellcheck=\"false\" />\n      </div>\n      <div class=\"p-field p-col-6 p-lg-2 p-sm-6\">\n        <label for=\"start\">Start</label>\n        <InputText id=\"start\" type=\"number\" v-model=\"start\" />\n      </div>\n      <div class=\"p-field p-col-6 p-lg-2 p-sm-6\">\n        <label for=\"max\">Max results</label>\n        <InputText id=\"max\" type=\"number\" v-model=\"max\" />\n      </div>\n      <div class=\"p-field p-col-12 p-lg-8 p-md-12\">\n        <label for=\"metadata\">Metadata</label>\n        <InputText id=\"metadata\" type=\"text\" v-model=\"metadata\" />\n      </div>\n    </div>\n    <br />\n    <Button icon=\"pi pi-play\" @click=\"search\" label=\"Search\" />\n  </div>\n\n  <div v-if=\"json\">\n    <Accordion>\n      <AccordionTab header=\"JSON\">\n        <div class=\"json\">{{ json }}</div>\n      </AccordionTab>\n    </Accordion>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref } from 'vue';\nimport AuthWarning from '@/components/AuthWarning.vue';\nimport { useAuth } from '@/plugins/Auth';\n\nexport default defineComponent({\n  components: { AuthWarning },\n  setup() {\n    const { configured, fetchWithToken } = useAuth();\n    /* eslint-disable  @typescript-eslint/no-explicit-any */\n    const json = ref<{ [index: string]: any } | undefined>(undefined);\n    /* eslint-enable  @typescript-eslint/no-explicit-any */\n    const start = ref(0);\n    const max = ref(10);\n    const metadata = ref('');\n\n    const query = ref(`{\n  \"q\": \"\",\n  \"facets\": [ \"oai_dc.date\" ],\n  \"facet.oai_dc.date.range\": [\n    [\"*\", \"\", \"Pre November 2020\"],\n    [\"2020-11-01\", \"\", \"Post November 2020\"]\n  ],\n  \"fields\": [\n    { \"name\": \"xip.title\", \"values\": [] },\n    { \"name\": \"xip.document_type\", \"values\": [] }\n  ],\n  \"sort\": [\n    { \"sortFields\": [\"xip.document_type\"], \"sortOrder\": \"desc\" }\n  ]\n}`);\n\n    const search = async () => {\n      // TODO add some loading indicator/button spinner\n      json.value = undefined;\n\n      // TODO percent-encode and create some helper\n      const body = `q=${query.value}&start=${start.value}&max=${max.value}&metadata=${metadata.value}`;\n\n      const res = await fetchWithToken('api/content/search', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n        },\n        body,\n      });\n      json.value = await res.json();\n    };\n\n    return { configured, query, start, max, metadata, search, json };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped=\"true\">\ntextarea {\n  font-family: monospace;\n}\n</style>\n","\nimport { defineComponent, ref } from 'vue';\nimport AuthWarning from '@/components/AuthWarning.vue';\nimport { useAuth } from '@/plugins/Auth';\n\nexport default defineComponent({\n  components: { AuthWarning },\n  setup() {\n    const { configured, fetchWithToken } = useAuth();\n    /* eslint-disable  @typescript-eslint/no-explicit-any */\n    const json = ref<{ [index: string]: any } | undefined>(undefined);\n    /* eslint-enable  @typescript-eslint/no-explicit-any */\n    const start = ref(0);\n    const max = ref(10);\n    const metadata = ref('');\n\n    const query = ref(`{\n  \"q\": \"\",\n  \"facets\": [ \"oai_dc.date\" ],\n  \"facet.oai_dc.date.range\": [\n    [\"*\", \"\", \"Pre November 2020\"],\n    [\"2020-11-01\", \"\", \"Post November 2020\"]\n  ],\n  \"fields\": [\n    { \"name\": \"xip.title\", \"values\": [] },\n    { \"name\": \"xip.document_type\", \"values\": [] }\n  ],\n  \"sort\": [\n    { \"sortFields\": [\"xip.document_type\"], \"sortOrder\": \"desc\" }\n  ]\n}`);\n\n    const search = async () => {\n      // TODO add some loading indicator/button spinner\n      json.value = undefined;\n\n      // TODO percent-encode and create some helper\n      const body = `q=${query.value}&start=${start.value}&max=${max.value}&metadata=${metadata.value}`;\n\n      const res = await fetchWithToken('api/content/search', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n        },\n        body,\n      });\n      json.value = await res.json();\n    };\n\n    return { configured, query, start, max, metadata, search, json };\n  },\n});\n","import { render } from \"./Search.vue?vue&type=template&id=24f6af26&scoped=true\"\nimport script from \"./Search.vue?vue&type=script&lang=ts\"\nexport * from \"./Search.vue?vue&type=script&lang=ts\"\n\nimport \"./Search.vue?vue&type=style&index=0&id=24f6af26&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-24f6af26\"\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Search.vue?vue&type=style&index=0&id=24f6af26&lang=scss&scoped=true\""],"sourceRoot":""}