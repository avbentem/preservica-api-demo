(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["search"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"14c3":function(e,t,n){var r=n("c6b6"),a=n("9263");e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var c=n.call(e,t);if("object"!==typeof c)throw TypeError("RegExp exec method returned something other than an Object or null");return c}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return a.call(e,t)}},"2abf":function(e,t,n){},"2d3b":function(e,t,n){"use strict";n.r(t);n("99af"),n("d3b7"),n("ac1f"),n("841c"),n("ddb0");var r=n("7a23"),a=Object(r["T"])("data-v-1a63e01b");Object(r["z"])("data-v-1a63e01b");var c={class:"search"},i=Object(r["m"])("h1",null,"Search",-1),l={class:"intro"},o=Object(r["l"])(" Search could be performed using either CMIS or the API, but to use facets "),u=Object(r["m"])("a",{href:"https://developers.preservica.com/api-reference/8-content-api"},"the Content API",-1),s=Object(r["l"])(" is used. The available fields and filters are retrieved from "),d=Object(r["l"])("the indexed fields"),f=Object(r["l"])(". "),p=Object(r["m"])("p",{class:"intro p-mb-6"}," Select the fields to include in the results. All selected fields will also be available as filters. ",-1),b=Object(r["m"])("p",{class:"intro p-mb-6"}," This is the request that will be sent to the API. You can edit this manually, and it will also be updated when making changes in the other tabs and input fields. ",-1),m={class:"p-fluid p-formgrid p-grid p-text-left"},h={class:"p-field p-col-12"},v=Object(r["m"])("label",{for:"metadata"},"Metadata to return",-1),O={class:"p-field p-col-12"},j=Object(r["m"])("label",{for:"query"},"Query",-1),x={key:0,class:"p-mx-lg-6 p-mx-md-2 p-mx-sm-0"},y=Object(r["m"])("br",null,null,-1),g={class:"p-fluid p-formgrid p-grid p-text-left"},E={class:"p-input-icon-right p-mb-2"},w={class:"p-fluid p-formgrid p-grid p-text-left"},S={class:"p-field p-col-12 p-lg-8 p-md-6"},q=Object(r["m"])("label",{for:"q"},"Search text",-1),I={class:"p-field p-col-6 p-lg-1 p-md-2"},R=Object(r["m"])("label",{for:"start"},"Start",-1),T={class:"p-field p-col-6 p-lg-1 p-md-2"},_=Object(r["m"])("label",{for:"max"},"Limit",-1),C={class:"p-field p-col-12 p-lg-2 p-md-2 p-as-end"},k={key:1},V={class:"json"};Object(r["x"])();var M=a((function(e,t,n,M,A,N){var B=Object(r["E"])("router-link"),U=Object(r["E"])("TabPanel"),P=Object(r["E"])("Column"),F=Object(r["E"])("DataTable"),J=Object(r["E"])("InputText"),K=Object(r["E"])("Textarea"),D=Object(r["E"])("TabView"),$=Object(r["E"])("AuthWarning"),L=Object(r["E"])("Button"),W=Object(r["E"])("InputNumber"),Y=Object(r["E"])("AccordionTab"),z=Object(r["E"])("Accordion");return Object(r["w"])(),Object(r["h"])(r["a"],null,[Object(r["m"])("div",c,[i,e.configured?(Object(r["w"])(),Object(r["h"])(D,{key:0,onTabChange:e.onTabChange},{default:a((function(){return[Object(r["m"])(U,{header:"Introduction"},{default:a((function(){return[Object(r["m"])("p",l,[o,u,s,Object(r["m"])(B,{to:"/indexes"},{default:a((function(){return[d]})),_:1}),f])]})),_:1}),Object(r["m"])(U,{header:"Fields"},{default:a((function(){return[p,e.fields?(Object(r["w"])(),Object(r["h"])(F,{key:0,value:e.fields,selection:e.selectedFields,"onUpdate:selection":t[1]||(t[1]=function(t){return e.selectedFields=t}),autoLayout:!0,responsiveLayout:"scroll",sortMode:"multiple",multiSortMeta:e.multiSortMeta,filters:e.filters},{default:a((function(){return[Object(r["m"])(P,{selectionMode:"multiple",headerStyle:"width: 3rem"}),Object(r["m"])(P,{field:"shortName",header:"source",sortable:!0,filterMatchMode:"contains",headerClass:"p-text-center",bodyClass:"p-text-center"}),Object(r["m"])(P,{field:"displayName",header:"name",sortable:!0,filterMatchMode:"contains"}),Object(r["m"])(P,{field:"shortKey",header:"key",sortable:!0,filterMatchMode:"contains"}),Object(r["m"])(P,{field:"type",header:"type",sortable:!0,filterMatchMode:"in"}),Object(r["m"])(P,{field:"facetable",header:"facet",sortable:!0,filterMatchMode:"equals"})]})),_:1},8,["value","selection","multiSortMeta","filters"])):Object(r["i"])("",!0)]})),_:1}),Object(r["m"])(U,{header:"Request"},{default:a((function(){return[b,Object(r["m"])("div",null,[Object(r["m"])("div",m,[Object(r["m"])("div",h,[v,Object(r["m"])(J,{id:"metadata",type:"text",modelValue:e.metadata,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.metadata=t})},null,8,["modelValue"])]),Object(r["m"])("div",O,[j,Object(r["m"])(K,{id:"query",modelValue:e.queryJson,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.queryJson=t}),rows:"30",autoResize:!1,spellcheck:"false"},null,8,["modelValue"])])])])]})),_:1})]})),_:1},8,["onTabChange"])):Object(r["i"])("",!0),Object(r["m"])($)]),e.configured?(Object(r["w"])(),Object(r["h"])("div",x,[y,Object(r["m"])("div",g,[(Object(r["w"])(!0),Object(r["h"])(r["a"],null,Object(r["C"])(e.filtersAndValues,(function(t,n){return Object(r["w"])(),Object(r["h"])("div",{key:"field-".concat(n),class:"p-field p-col-12 p-lg-4 p-md-6"},[Object(r["m"])("label",{for:"f-".concat(n,"-0")},"Filter for "+Object(r["I"])(e.filterName(t)),9,["for"]),Object(r["m"])(L,{icon:"pi pi-plus",class:"p-button-rounded p-button-primary p-button-text",onClick:function(n){return e.addFilter(t)}},null,8,["onClick"]),(Object(r["w"])(!0),Object(r["h"])(r["a"],null,Object(r["C"])(t.values,(function(a,c){return Object(r["w"])(),Object(r["h"])("div",{key:"filter-".concat(n,"-").concat(c)},[Object(r["m"])("span",E,[Object(r["m"])(J,{id:"f-".concat(n,"-").concat(c),modelValue:t.values[c],"onUpdate:modelValue":function(e){return t.values[c]=e}},null,8,["id","modelValue","onUpdate:modelValue"]),Object(r["m"])("i",{class:"pi pi-times remove-filter",onClick:function(n){return e.removeFilter(t,c)}},null,8,["onClick"])])])})),128))])})),128))]),Object(r["m"])("div",w,[Object(r["m"])("div",S,[q,Object(r["m"])(J,{id:"q",modelValue:e.q,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.q=t})},null,8,["modelValue"])]),Object(r["m"])("div",I,[R,Object(r["m"])(W,{id:"start",modelValue:e.start,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.start=t}),min:0,showButtons:""},null,8,["modelValue"])]),Object(r["m"])("div",T,[_,Object(r["m"])(W,{id:"max",modelValue:e.max,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.max=t}),min:0,showButtons:""},null,8,["modelValue"])]),Object(r["m"])("div",C,[Object(r["m"])(L,{icon:"pi pi-search",onClick:e.search,label:"Search"},null,8,["onClick"])])])])):Object(r["i"])("",!0),e.resultJson?(Object(r["w"])(),Object(r["h"])("div",k,[Object(r["m"])(z,null,{default:a((function(){return[Object(r["m"])(Y,{header:"JSON"},{default:a((function(){return[Object(r["m"])("div",V,Object(r["I"])(e.resultJson),1)]})),_:1})]})),_:1})])):Object(r["i"])("",!0)],64)}));n("7db0"),n("a15b"),n("d81d"),n("a434"),n("b0c0"),n("a4d3"),n("e01a"),n("d28b"),n("3ca3");function A(e){return A="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}var N=n("b85c"),B=(n("96cf"),n("1da1")),U=n("18cb"),P=n("34f5"),F=n("d0f2"),J=Object(r["n"])({components:{AuthWarning:P["a"]},setup:function(){var e=Object(F["b"])(),t=e.configured,n=e.fetchWithToken,a=Object(U["b"])(),c=Object(r["B"])(void 0),i=Object(r["B"])([]),l=Object(r["B"])([]),o=Object(r["B"])([]),u=Object(r["B"])({}),s=Object(r["B"])([{field:"shortName",order:-1},{field:"displayName",order:1}]),d=Object(r["B"])(void 0),f=Object(r["B"])(0),p=Object(r["B"])(10),b=Object(r["B"])({q:"",fields:[{name:"xip.title",values:[""]},{name:"xip.description",values:[""]},{name:"xip.document_type",values:["IO"]}],sort:[{sortFields:["xip.created"],sortOrder:"desc"}],facets:["xip.created","xip.format_group_r_Display"],"facet.xip.created.range":[["*","","Pre 2015"],["2015-01-01","","2015"],["2016-01-01","","2016"],["2017-01-01","","2017"],["2018-01-01","","2018"],["2019-01-01","","2019"],["2020-01-01","","2020"],["2021-01-01","*","2021 and later"]]}),m=Object(r["B"])("xip.created,xip.title,xip.document_type,xip.format_group_r_Display"),h=function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return d.value=void 0,t="q=".concat(JSON.stringify(b.value),"&start=").concat(f.value,"&max=").concat(p.value,"&metadata=").concat(m.value),e.next=4,n("api/content/search",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t});case 4:return r=e.sent,e.next=7,r.json();case 7:d.value=e.sent;case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t.value&&n("api/content/indexed-fields").then(function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:c.value=e.sent.value;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),{configured:t,toast:a,fields:c,selectedFields:i,filters:u,multiSortMeta:s,shortNames:l,types:o,query:b,start:f,max:p,metadata:m,search:h,resultJson:d}},watch:{selectedFields:function(e){var t=this;console.log("watch selectedField"),this.query.fields=e.map((function(e){var n;return{name:e.shortKey,values:(null===(n=t.query.fields.find((function(t){return t.name===e.shortKey})))||void 0===n?void 0:n.values)||[]}})),this.metadata=this.query.fields.map((function(e){return e.name})).join()},query:function(e){this.q=e.q}},methods:{onTabChange:function(e){var t=this;if(console.log("tab change",e),this.fields&&this.query){var n,r=[],a=Object(N["a"])(this.query.fields);try{var c=function(){var e=n.value,a=t.fields.find((function(t){return e.name===t.shortKey}));if(!a)return t.toast.add({severity:"error",summary:"Invalid field",detail:"The field ".concat(e.name," in the JSON is invalid and will be removed when making other changes"),life:5e3}),{v:void 0};r.push(a)};for(a.s();!(n=a.n()).done;){var i=c();if("object"===A(i))return i.v}}catch(l){a.e(l)}finally{a.f()}this.selectedFields=r}},filterName:function(e){var t,n;return(null===(t=this.fields)||void 0===t||null===(n=t.find((function(t){return t.shortKey===e.name})))||void 0===n?void 0:n.displayName)||e.name},addFilter:function(e){var t;console.log("addfilter",e.name),null===(t=e.values)||void 0===t||t.push("")},removeFilter:function(e,t){var n;null===(n=e.values)||void 0===n||n.splice(t,1)}},computed:{queryJson:{get:function(){return JSON.stringify(this.query,null,2)},set:function(e){this.query=JSON.parse(e)}},q:{get:function(){return this.query.q},set:function(e){this.query.q=e}},filtersAndValues:{get:function(){return this.query.fields},set:function(e){this.query.fields=e}}}});n("fe5a");J.render=M,J.__scopeId="data-v-1a63e01b";t["default"]=J},"7db0":function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").find,c=n("44d2"),i=n("ae40"),l="find",o=!0,u=i(l);l in[]&&Array(1)[l]((function(){o=!1})),r({target:"Array",proto:!0,forced:o||!u},{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),c(l)},"841c":function(e,t,n){"use strict";var r=n("d784"),a=n("825a"),c=n("1d80"),i=n("129f"),l=n("14c3");r("search",1,(function(e,t,n){return[function(t){var n=c(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var c=a(e),o=String(this),u=c.lastIndex;i(u,0)||(c.lastIndex=0);var s=l(c,o);return i(c.lastIndex,u)||(c.lastIndex=u),null===s?-1:s.index}]}))},9263:function(e,t,n){"use strict";var r=n("ad6d"),a=n("9f7f"),c=RegExp.prototype.exec,i=String.prototype.replace,l=c,o=function(){var e=/a/,t=/b*/g;return c.call(e,"a"),c.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),u=a.UNSUPPORTED_Y||a.BROKEN_CARET,s=void 0!==/()??/.exec("")[1],d=o||s||u;d&&(l=function(e){var t,n,a,l,d=this,f=u&&d.sticky,p=r.call(d),b=d.source,m=0,h=e;return f&&(p=p.replace("y",""),-1===p.indexOf("g")&&(p+="g"),h=String(e).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==e[d.lastIndex-1])&&(b="(?: "+b+")",h=" "+h,m++),n=new RegExp("^(?:"+b+")",p)),s&&(n=new RegExp("^"+b+"$(?!\\s)",p)),o&&(t=d.lastIndex),a=c.call(f?n:d,h),f?a?(a.input=a.input.slice(m),a[0]=a[0].slice(m),a.index=d.lastIndex,d.lastIndex+=a[0].length):d.lastIndex=0:o&&a&&(d.lastIndex=d.global?a.index+a[0].length:t),s&&a&&a.length>1&&i.call(a[0],n,(function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(a[l]=void 0)})),a}),e.exports=l},"9f7f":function(e,t,n){"use strict";var r=n("d039");function a(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=a("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=a("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},a434:function(e,t,n){"use strict";var r=n("23e7"),a=n("23cb"),c=n("a691"),i=n("50c4"),l=n("7b0b"),o=n("65f0"),u=n("8418"),s=n("1dde"),d=n("ae40"),f=s("splice"),p=d("splice",{ACCESSORS:!0,0:0,1:2}),b=Math.max,m=Math.min,h=9007199254740991,v="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!f||!p},{splice:function(e,t){var n,r,s,d,f,p,O=l(this),j=i(O.length),x=a(e,j),y=arguments.length;if(0===y?n=r=0:1===y?(n=0,r=j-x):(n=y-2,r=m(b(c(t),0),j-x)),j+n-r>h)throw TypeError(v);for(s=o(O,r),d=0;d<r;d++)f=x+d,f in O&&u(s,d,O[f]);if(s.length=r,n<r){for(d=x;d<j-r;d++)f=d+r,p=d+n,f in O?O[p]=O[f]:delete O[p];for(d=j;d>j-r+n;d--)delete O[d-1]}else if(n>r)for(d=j-r;d>x;d--)f=d+r-1,p=d+n-1,f in O?O[p]=O[f]:delete O[p];for(d=0;d<n;d++)O[d+x]=arguments[d+2];return O.length=j-r+n,s}})},ac1f:function(e,t,n){"use strict";var r=n("23e7"),a=n("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},d784:function(e,t,n){"use strict";n("ac1f");var r=n("6eeb"),a=n("d039"),c=n("b622"),i=n("9263"),l=n("9112"),o=c("species"),u=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),s=function(){return"$0"==="a".replace(/./,"$0")}(),d=c("replace"),f=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),p=!a((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,d){var b=c(e),m=!a((function(){var t={};return t[b]=function(){return 7},7!=""[e](t)})),h=m&&!a((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[o]=function(){return n},n.flags="",n[b]=/./[b]),n.exec=function(){return t=!0,null},n[b](""),!t}));if(!m||!h||"replace"===e&&(!u||!s||f)||"split"===e&&!p){var v=/./[b],O=n(b,""[e],(function(e,t,n,r,a){return t.exec===i?m&&!a?{done:!0,value:v.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:s,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),j=O[0],x=O[1];r(String.prototype,e,j),r(RegExp.prototype,b,2==t?function(e,t){return x.call(e,this,t)}:function(e){return x.call(e,this)})}d&&l(RegExp.prototype[b],"sham",!0)}},d81d:function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").map,c=n("1dde"),i=n("ae40"),l=c("map"),o=i("map");r({target:"Array",proto:!0,forced:!l||!o},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},fe5a:function(e,t,n){"use strict";n("2abf")}}]);
//# sourceMappingURL=search.6e5d3fac.js.map